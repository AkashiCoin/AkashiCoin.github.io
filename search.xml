<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>workers.dev 域名被 dns 污染的解决方案</title>
      <link href="/2022/05/29/workers-dev-dns/"/>
      <url>/2022/05/29/workers-dev-dns/</url>
      
        <content type="html"><![CDATA[<p>方法很简单，基本为给使用cf原本的代理来不使用workers.dev的域名</p><h2 id="准备材料"><a href="#准备材料" class="headerlink" title="准备材料"></a>准备材料</h2><ul><li>一个域名</li><li>一个正在使用的 worker</li></ul><h2 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h2><ol><li><p>首先把域名ns接入cf，域名可使用 <a href="http://www.freenom.com/">freenom</a> 免费域名</p></li><li><p>然后再域名的DNS中加入cname记录，指向worker的域名，并开启小云朵</p><p><img src="https://cdn.smoe.top/moe-cdn@latest/img/workers-dev-dns/20220529174452.png"></p></li><li><p>进入刚刚填入的worker中</p><p><img src="https://cdn.smoe.top/moe-cdn@latest/img/workers-dev-dns/20220529174712.png"></p></li><li><p>添加路由</p><p><img src="https://cdn.smoe.top/moe-cdn@latest/img/workers-dev-dns/20220529175031.png"></p></li><li><p>以这样的格式填写 <code>你的域名/*</code> <strong>千万不要忘了&#x2F;</strong>*</p><p><img src="https://cdn.smoe.top/moe-cdn@latest/img/workers-dev-dns/20220529175240.png"></p></li><li><p>之后使用你自定义的域名访问即可</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> cloudflare </category>
          
      </categories>
      
      
        <tags>
            
            <tag> cloudflare </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>利用heroku + cloudflare搭建xray免费科学上网</title>
      <link href="/2022/05/29/heroku-xray-cloudflare/"/>
      <url>/2022/05/29/heroku-xray-cloudflare/</url>
      
        <content type="html"><![CDATA[<p><strong>注意！本教程仅且只能用于研究与学习</strong></p><p><strong>此教程作为<a href="https://www.smoe.top/2022/01/16/heroku-v2ray-cloudflare/">利用heroku + cloudflare搭建v2ray免费科学上网</a>的衍生，请阅读上一个教程，了解相关方法后再使用此教程</strong></p><h2 id="一、服务端的部署"><a href="#一、服务端的部署" class="headerlink" title="一、服务端的部署"></a>一、服务端的部署</h2><p>​    本教程使用使用的仓库为: <a href="https://github.com/AkashiCoin/Xray-Heroku">AkashiCoin&#x2F;Xray-Heroku</a>，此仓库为大佬 <a href="https://github.com/Lbingyi">Lbingyi</a> 创建并维护，在现在[22&#x2F;05&#x2F;29]大佬已经删库了，这里使用的是我的备份仓库。</p><ol><li><p>创建自己的仓库</p><p>详细步骤可参考 <a href="https://www.smoe.top/2022/01/16/heroku-v2ray-cloudflare/#Extra-%E5%88%9B%E5%BB%BAgithub%E9%A1%B9%E7%9B%AE%E4%BB%93%E5%BA%93">创建Github仓库</a></p><p>其中 <code>import </code>链接可改为 <code>https://github.com/AkashiCoin/Xray-Heroku.git</code></p></li><li><p>直接部署项目</p><p>点击自己仓库中的<code>Deploy to Heroku</code> 图标即可将 xray 部署到 heroku</p><p>可从<a href="https://www.uuidgenerator.net/">这里</a>获取一个自己的 <code>UUID</code> ，并填入部署过程中的 <code>AUUID</code> 中，其余变量可不动</p></li></ol><h2 id="二、客户端使用"><a href="#二、客户端使用" class="headerlink" title="二、客户端使用"></a>二、客户端使用</h2><p>​    部署完成后，照着前一个教程的样子使用即可，这里放出可供参考的配置</p><p>​    因为workers.dev的dns污染，可以参考 <a href="https://www.smoe.top/2022/05/29/workers-dev-dns/">这个</a> 教程解决</p><h3 id="v2ray的vmess协议"><a href="#v2ray的vmess协议" class="headerlink" title="v2ray的vmess协议"></a>v2ray的vmess协议</h3><p>​    <img src="https://cdn.smoe.top/moe-cdn@latest/img/workers-dev-dns/20220529180140.png"></p><h3 id="v2ray的vless协议"><a href="#v2ray的vless协议" class="headerlink" title="v2ray的vless协议"></a>v2ray的vless协议</h3><p>​    <img src="https://cdn.smoe.top/moe-cdn@latest/img/workers-dev-dns/20220529180257.png"></p><h3 id="trojan协议"><a href="#trojan协议" class="headerlink" title="trojan协议"></a>trojan协议</h3><p>​    <img src="https://cdn.smoe.top/moe-cdn@latest/img/workers-dev-dns/20220529180353.png"></p><h3 id="……"><a href="#……" class="headerlink" title="……"></a>……</h3><h2 id="进阶-两个Heroku容器轮切"><a href="#进阶-两个Heroku容器轮切" class="headerlink" title="进阶 两个Heroku容器轮切"></a>进阶 两个Heroku容器轮切</h2><p>​    worker的单双日轮换脚本如下, 将 <code>SingleDay</code> 和 <code>DoubleDay</code> 中的<code>&#39;xxx.herokuapp.com&#39;</code>改为你的两个heroku账号的容器地址，其他照常操作</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">SingleDay</span> = <span class="string">&#x27;xxx.herokuapp.com&#x27;</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">DoubleDay</span> = <span class="string">&#x27;xxx.herokuapp.com&#x27;</span></span><br><span class="line"><span class="title function_">addEventListener</span>(</span><br><span class="line">    <span class="string">&quot;fetch&quot;</span>,<span class="function"><span class="params">event</span> =&gt;</span> &#123;</span><br><span class="line">    </span><br><span class="line">        <span class="keyword">let</span> nd = <span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line">        <span class="keyword">if</span> (nd.<span class="title function_">getDate</span>()%<span class="number">2</span>) &#123;</span><br><span class="line">            host = <span class="title class_">SingleDay</span></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            host = <span class="title class_">DoubleDay</span></span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">let</span> url=<span class="keyword">new</span> <span class="title function_">URL</span>(event.<span class="property">request</span>.<span class="property">url</span>);</span><br><span class="line">        url.<span class="property">hostname</span>=host;</span><br><span class="line">        <span class="keyword">let</span> request=<span class="keyword">new</span> <span class="title class_">Request</span>(url,event.<span class="property">request</span>);</span><br><span class="line">        event. <span class="title function_">respondWith</span>(</span><br><span class="line">            <span class="title function_">fetch</span>(request)</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 科学上网 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 科学上网 </tag>
            
            <tag> heroku </tag>
            
            <tag> cloudflare </tag>
            
            <tag> xray </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【zhenxun_bot】可爱的绪山真寻Bot部署教程</title>
      <link href="/2022/03/25/zhenxun-bot-deploy/"/>
      <url>/2022/03/25/zhenxun-bot-deploy/</url>
      
        <content type="html"><![CDATA[<p><strong>此项目仅用于学习交流，请勿用于非法用途</strong></p><div align=center><img width="320" height="320" src="https://raw.githubusercontent.com/HibiKier/zhenxun_bot/main/logo.png"/></div><p><strong>此项目基于 Nonebot2 和 go-cqhttp 开发，以 postgresql 作为数据库的非常可爱的绪山真寻bot~~</strong></p><hr><h2 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h2><ol><li>保证<strong>系统</strong>的相同，<strong>环境</strong>的相同，是尽量减少麻烦的最有效的途径</li><li>遇到麻烦先不要慌，先看看你是不是漏看了<strong>亿步</strong></li><li>实在解决不了，带上你的完整的报错，和自己所做过的行为去群里问问。QQ群：[ <strong><a href="https://jq.qq.com/?_wv=1027&k=u8PgBkMZ">是真寻酱哒</a> </strong>]</li></ol><h2 id="必要的准备"><a href="#必要的准备" class="headerlink" title="必要的准备"></a>必要的准备</h2><ol><li>一定的基础，包括但不限于稍微熟悉<code>linux</code>或<code>windows cmd</code>命令行</li><li>一台服务器，推荐系统: <code>Ubuntu20.04 LTS</code></li><li>一个可以用的<strong>脑子</strong></li><li>善于百度谷歌的<strong>双手</strong></li></ol><hr><h2 id="一、必要环境的安装"><a href="#一、必要环境的安装" class="headerlink" title="一、必要环境的安装"></a>一、必要环境的安装</h2><h3 id="1-1-python环境的安装"><a href="#1-1-python环境的安装" class="headerlink" title="1.1 python环境的安装"></a>1.1 python环境的安装</h3><p>​    从最开始的纯净的<code>Ubuntu20.04</code>系统开始部署，<code>Ubuntu20.04</code>自带有<code>python3.8.10</code>所以避免了不太友好的<code>python3.8</code>或者<code>python3.9</code>的安装。当然，如果你是别的系统，也可以百度搜索 【{你的系统和版本}<code>python3.8</code>安装】。所以为了避免一系列因为系统不相同而导致的问题，推荐使用纯净的<code>Ubuntu20.04</code>系统部署真寻。</p><ul><li><p>一些需要用的命令的安装：</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo apt update &amp;&amp; sudo apt install -y wget git screen ffmpeg</span><br></pre></td></tr></table></figure></li><li><p>安装<code>pip</code>命令如下：</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo apt update &amp;&amp; sudo apt install -y python3-pip</span><br></pre></td></tr></table></figure></li><li><p>新版真寻使用的<code>poetry</code>虚拟环境安装，所以需要安装<code>poetry</code>，安装命令如下：</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo pip install poetry</span><br></pre></td></tr></table></figure></li></ul><h3 id="1-2-PostgreSQL数据库的安装"><a href="#1-2-PostgreSQL数据库的安装" class="headerlink" title="1.2 PostgreSQL数据库的安装"></a>1.2 PostgreSQL数据库的安装</h3><p>​    据了解 <code>PostgreSQL</code> 数据库的版本在<code>9.0</code>以上即可，版本的不同并不会对真寻的运行造成影响，所以这里使用的是<code>PostgreSQL12</code>，<strong>以下命令注意要一行一行运行.</strong></p><ul><li><p><code>PostgreSQL</code>安装命令：</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo apt update &amp;&amp; sudo apt install -y postgresql postgresql-contrib</span><br></pre></td></tr></table></figure></li><li><p>创建数据库和用户：</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo su - postgres</span><br><span class="line">psql</span><br><span class="line">CREATE USER zhenxun WITH PASSWORD &#x27;zxpassword&#x27;;</span><br><span class="line">CREATE DATABASE zhenxun OWNER zhenxun;</span><br><span class="line">exit</span><br><span class="line">exit</span><br></pre></td></tr></table></figure></li></ul><p>​        <strong>ps: <code>exit</code>命令需要运行两次来退出数据库</strong></p><h3 id="1-3-一些必要的依赖"><a href="#1-3-一些必要的依赖" class="headerlink" title="1.3 一些必要的依赖"></a>1.3 一些必要的依赖</h3><ul><li><p>真寻运行所需要的的系统相关依赖的安装：</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo apt install -y \</span><br><span class="line">    libgl1 \</span><br><span class="line">    libglib2.0-0 \</span><br><span class="line">    libnss3 \</span><br><span class="line">    libatk1.0-0 \</span><br><span class="line">    libatk-bridge2.0-0 \</span><br><span class="line">    libcups2 \</span><br><span class="line">    libxkbcommon0 \</span><br><span class="line">    libxcomposite1 \</span><br><span class="line">    libxrandr2 \</span><br><span class="line">    libgbm1 \</span><br><span class="line">    libgtk-3-0 \</span><br><span class="line">    libasound2 </span><br></pre></td></tr></table></figure></li><li><p><code>Ubuntu</code>安装中文字体</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo apt-get install -y ttf-wqy-zenhei ttf-wqy-microhei fonts-arphic-ukai fonts-arphic-uming</span><br><span class="line">sudo fc-cache -f -v</span><br></pre></td></tr></table></figure></li></ul><hr><h2 id="二、go-cqhttp的安装"><a href="#二、go-cqhttp的安装" class="headerlink" title="二、go-cqhttp的安装"></a>二、go-cqhttp的安装</h2><blockquote><p>go-cqhttp 是什么？</p><p>使用OneBot协议实现的无头QQ，接受消息发往后端处理</p></blockquote><h3 id="2-1-下载go-cqhttp"><a href="#2-1-下载go-cqhttp" class="headerlink" title="2.1 下载go-cqhttp"></a>2.1 下载go-cqhttp</h3><ul><li><p>下载go-cqhttp需要<code>wget</code>组件，如果没有可以运行</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo apt install -y wget</span><br></pre></td></tr></table></figure></li><li><p>安装命令如下</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">mkdir ~/go-cqhttp &amp;&amp; \</span><br><span class="line">cd ~/go-cqhttp &amp;&amp; \</span><br><span class="line">wget https://github.com/Mrs4s/go-cqhttp/releases/download/v1.0.0-rc1/go-cqhttp_linux_amd64.tar.gz -O go-cqhttp_linux_amd64.tar.gz &amp;&amp; \</span><br><span class="line">tar -zxvf go-cqhttp_linux_amd64.tar.gz</span><br></pre></td></tr></table></figure><p><strong>复制到命令行一键运行</strong></p></li></ul><h3 id="2-2-修改相关配置"><a href="#2-2-修改相关配置" class="headerlink" title="2.2 修改相关配置"></a>2.2 修改相关配置</h3><ul><li><p>运行一次go-cqhttp</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cd ~/go-cqhttp &amp;&amp; echo -e &quot;3\n&quot; | ./go-cqhttp</span><br></pre></td></tr></table></figure></li><li><p>首次运行会出现以下界面</p><p><img src="https://cdn.smoe.top/moe-cdn@latest/img/zhenxun-bot-deploy/202203250152858.png" alt="image-20220325015235754"></p></li><li><p>之后输入命令修改配置</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo sed -i &#x27;s|universal:.*|universal: ws://localhost:8080/onebot/v11/ws|g&#x27; config.yml</span><br></pre></td></tr></table></figure></li></ul><h3 id="2-3-go-cqhttp的持久化运行"><a href="#2-3-go-cqhttp的持久化运行" class="headerlink" title="2.3 go-cqhttp的持久化运行"></a>2.3 go-cqhttp的持久化运行</h3><ul><li><p>持久化运行go-cqhttp，推荐使用<code>screen</code>，方便管理适合新手，<code>screen</code>的安装命令：</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo apt install -y screen</span><br></pre></td></tr></table></figure></li><li><p>安装完成以后创建<code>screen</code>并进入：</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">screen -S go-cqhttp </span><br></pre></td></tr></table></figure></li><li><p>在重新出现的<code>shell</code>界面，运行go-cqhttp并扫描二维码登陆bot的qq，待命：</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cd ~/go-cqhttp &amp;&amp; echo -e &quot;3\n&quot; | ./go-cqhttp -faststart</span><br></pre></td></tr></table></figure><ul><li><p>再出现二维码以后，扫码登陆</p><p><img src="https://cdn.smoe.top/moe-cdn@latest/img/zhenxun-bot-deploy/202203250200046.png" alt="image-20220325020005939"></p></li><li><p>之后出现以下信息为正常登陆成功，然后使用 <code>Ctrl + A + D</code> 组合键退出screen</p><p><img src="https://cdn.smoe.top/moe-cdn@latest/img/zhenxun-bot-deploy/202203250206079.png" alt="image-20220325020616971"></p></li></ul></li></ul><p>​    <strong>至此，go-cqhttp的部署完成了，接下来便是真寻本体的部署</strong></p><hr><h2 id="三、zhenxun-bot的部署"><a href="#三、zhenxun-bot的部署" class="headerlink" title="三、zhenxun_bot的部署"></a>三、zhenxun_bot的部署</h2><blockquote><p>这也是最容易出错的一步，在群里我们看到过很多的问题，等到以后我会将大部分可能出现的问题整理出来，供给大家查询。<del>(咕咕咕)</del> 以免同一个问题一天出现十几次<del>(让人血压飙升)</del></p></blockquote><h3 id="3-1-下载zhenxun-bot源码"><a href="#3-1-下载zhenxun-bot源码" class="headerlink" title="3.1 下载zhenxun_bot源码"></a>3.1 下载zhenxun_bot源码</h3><ul><li><p>使用git命令下载真寻源码，如果没有安装<code>git</code>需要运行：</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo apt install -y git</span><br></pre></td></tr></table></figure></li><li><p>git clone真寻源码：</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cd &amp;&amp; git clone https://ghproxy.com/github.com/HibiKier/zhenxun_bot.git</span><br></pre></td></tr></table></figure></li></ul><h3 id="3-2-修改相关配置"><a href="#3-2-修改相关配置" class="headerlink" title="3.2 修改相关配置"></a>3.2 修改相关配置</h3><ul><li><p>修改bot管理员账号，将<code>你自己的qq账号</code>改成你希望用来管理你bot的qq：</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cd ~/zhenxun_bot &amp;&amp; sed -i &#x27;s/SUPERUSERS.*/SUPERUSERS=[&quot;你自己的qq账号&quot;]/g&#x27; .env.dev</span><br></pre></td></tr></table></figure></li><li><p>修改数据库连接命令，如果你没对上面数据库的创建命令作出修改直接运行以下命令：</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sed -i &#x27;s|bind.*|bind: str = &quot;postgresql://zhenxun:zxpassword@localhost:5432/zhenxun&quot;|g&#x27; configs/config.py</span><br></pre></td></tr></table></figure></li></ul><h3 id="3-3-虚拟环境的配置"><a href="#3-3-虚拟环境的配置" class="headerlink" title="3.3 虚拟环境的配置"></a>3.3 虚拟环境的配置</h3><blockquote><p><strong>有很多人的问题都是出在了这里<del>（虽然也与阿咪文档写的不全有关）</del>，但是不可否认，这是不可缺少的一环</strong></p><p><strong>以后如果还有人在群里因为虚拟环境而发问，一概不予理会</strong></p></blockquote><ul><li><p>首先，你得进入虚拟环境：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~/zhenxun_bot &amp;&amp; poetry shell</span><br></pre></td></tr></table></figure></li><li><p>之后便是真寻的相关依赖的安装，使用命令：</p><figure class="highlight cmake"><table><tr><td class="code"><pre><span class="line">poetry <span class="keyword">install</span></span><br></pre></td></tr></table></figure><ul><li><p>如果是国内机器，不更换pip的源的话会感觉非常的慢，所以在依赖安装之前可以更换pip源:</p><figure class="highlight vim"><table><tr><td class="code"><pre><span class="line">sudo pip config <span class="keyword">set</span> <span class="keyword">global</span>.<span class="built_in">index</span>-url https://pypi.tuna.tsinghua.edu.<span class="keyword">cn</span>/simple</span><br></pre></td></tr></table></figure></li></ul></li><li><p>Playwright浏览器的安装：</p><figure class="highlight cmake"><table><tr><td class="code"><pre><span class="line">playwright <span class="keyword">install</span> chromium</span><br></pre></td></tr></table></figure></li><li><p>如果不想启动后下载一大堆资源，可以执行以下命令，下载相关资源</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">SOURCE_URL=https://pan.yropo.top/source/zhenxun/</span><br><span class="line">wget $&#123;SOURCE_URL&#125;data_draw_card.tar.gz -qO ~/.cache/data_draw_card.tar.gz \</span><br><span class="line">    &amp;&amp; wget $&#123;SOURCE_URL&#125;img_draw_card.tar.gz -qO ~/.cache/img_draw_card.tar.gz \</span><br><span class="line">    &amp;&amp; tar -zxvf ~/.cache/data_draw_card.tar.gz -C ~/zhenxun_bot/ \</span><br><span class="line">    &amp;&amp; tar -zxvf ~/.cache/img_draw_card.tar.gz -C ~/zhenxun_bot/ \</span><br><span class="line">    &amp;&amp; rm -rf ~/.cache/*.tar.gz</span><br></pre></td></tr></table></figure></li></ul><p>​        <strong>至此，真寻的所有的环境都已经配置完毕，就差最后一步的启动了</strong></p><h3 id="3-4-启动zhenxun-bot"><a href="#3-4-启动zhenxun-bot" class="headerlink" title="3.4 启动zhenxun_bot"></a>3.4 启动zhenxun_bot</h3><blockquote><p>再次强调一遍，启动真寻之前确定你进入了虚拟环境，有关虚拟环境的进入 <a href="/2022/03/25/zhenxun-bot-deploy/#3-3-%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83%E7%9A%84%E9%85%8D%E7%BD%AE">进入虚拟环境</a></p></blockquote><ul><li><p>当然，启动之前我们得让真寻一直跑着，所以我们需要用到<code>screen</code>来让真寻持久化运行</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">screen -S zhenxun</span><br></pre></td></tr></table></figure></li><li><p>然后先进入虚拟环境，再运行真寻：</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cd ~/zhenxun_bot &amp;&amp; poetry shell</span><br><span class="line">cd ~/zhenxun_bot &amp;&amp; python3 bot.py</span><br></pre></td></tr></table></figure></li></ul><h3 id="3-5-管理相关"><a href="#3-5-管理相关" class="headerlink" title="3.5 管理相关"></a>3.5 管理相关</h3><blockquote><p>真寻的安装目录位于 <code>~/zhenxun_bot</code> 下</p><p>go-cqhttp的安装目录位于 <code>~/go-cqhttp</code> 下</p></blockquote><ul><li><p>进入真寻的screen界面命令：</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">screen -r zhenxun</span><br></pre></td></tr></table></figure></li><li><p>进入go-cqhttp界面的命令：</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">screen -r go-cqhttp</span><br></pre></td></tr></table></figure><ul><li>使用 <code>Ctrl + A + D</code>退出 <code>screen</code></li><li>使用 <code>screen -r name -X quit</code> 结束 <code>screen</code></li></ul></li></ul><p><strong>好了，现在你可爱的真寻酱已经跑起来了！快去玩玩吧~</strong></p><hr><h2 id="四、进阶玩法"><a href="#四、进阶玩法" class="headerlink" title="四、进阶玩法"></a>四、进阶玩法</h2><blockquote><p>施工中，有时间再搞<del>（咕咕咕）</del></p></blockquote>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>【CloudFlare】官方免费CNAME接入教程</title>
      <link href="/2022/03/24/Cloudflare-CNAME/"/>
      <url>/2022/03/24/Cloudflare-CNAME/</url>
      
        <content type="html"><![CDATA[<blockquote><p>转载自： <a href="https://luotianyi.vc/" title="Luminous&#39; Home">Luminous’ Home</a> » <a href="https://luotianyi.vc/6185.html" title="【CloudFlare】官方免费CNAME接入教程">【CloudFlare】官方免费CNAME接入教程</a></p></blockquote><p>从2021年11月开始，CloudFlare禁用了Partner使用的<code>zone_set</code>API以避免滥用（因为该API接入不需要验证域名所有权），通过Partner实现CNAME接入的方式近乎落幕，仅剩Plesk空间存量的<code>ServerShield by Cloudflare</code>插件订阅能够正常接入。几个月过去了，官方也并没有对未来合作伙伴如何进行接入新域名给出任何解释。</p><p><img src="https://cdn.smoe.top/moe-cdn@latest/img/Cloudflare-CNAME/202203241913499.jpeg"></p><p>错过了Partner的时代，官方的CloudFlare for SaaS也提供了一种更灵活的CNAME接入方式，一起来看看吧。</p><hr><h2 id="一、功能简介"><a href="#一、功能简介" class="headerlink" title="一、功能简介"></a>一、功能简介</h2><p>CloudFlare for SaaS不是个新功能，这里单独拿出来讲，主要是几天前CF调整了一波免费额度。过去是每个域名收取2USD&#x2F;月的费用，现在不仅提供100个域名免费额度，而且超额后每个域名按0.1USD&#x2F;月收取费用，非常良心。</p><blockquote><p><strong>官方公告</strong>：<a href="https://blog.cloudflare.com/waf-for-saas/">https://blog.cloudflare.com/waf-for-saas/</a></p></blockquote><p>CloudFlare中一个完全接入的域名即为一个<code>zone</code>，点进去包括套餐、安全等等都是针对这一主域名配置的。官方SaaS功能针对的是你服务的客户，开放这项功能允许使用他们自己的域名直接附加在你的<code>zone</code>里，享受你<code>zone</code>包含的安全、加速等功能。</p><p><img src="https://cdn.smoe.top/moe-cdn@latest/img/Cloudflare-CNAME/202203241914627.jpeg"></p><p>说起来可能不是很直白，这里举几个应用场景的例子：</p><blockquote><p>★<strong>应用场景1</strong>：<code>a.com</code>通过NS接入了CF，<code>b.com</code>未接入CF；可以通过SaaS功能实现<code>1.b.com</code>&#x2F;<code>2.b.com</code>等直接附加在<code>a.com</code>上，通过CNAME指向CF的节点。</p><p>★<strong>应用场景2</strong>：<code>a.com</code>通过Plesk接入了CF，具有免费的Plesk Plus版本，<code>b.com</code>未接入CF或使用的免费版；可以通过SaaS功能实现<code>1.b.com</code>&#x2F;<code>2.b.com</code>等直接附加在<code>a.com</code>上，享受<code>a.com</code>域名下的ECC+RSA双证书、页面规则、高级防火墙权益。</p></blockquote><p>简而言之，可以通过这项功能，实现其他域名的CNAME接入以及对<code>zone</code>权益的共享，有兴趣的话，接着往下看吧~</p><hr><h2 id="二、配置接入"><a href="#二、配置接入" class="headerlink" title="二、配置接入"></a>二、配置接入</h2><h3 id="订阅CloudFlare-for-SaaS"><a href="#订阅CloudFlare-for-SaaS" class="headerlink" title="订阅CloudFlare for SaaS"></a>订阅CloudFlare for SaaS</h3><p>打开一个域名，选择【SSL&#x2F;TLS】下的【自定义主机名】，点击【启用CloudFlare for SaaS】后根据指示绑定外币卡或者PayPal，订阅CloudFlare for SaaS功能。</p><p><img src="https://cdn.smoe.top/moe-cdn@latest/img/Cloudflare-CNAME/202203241914672.jpeg"></p><p>CloudFlare for SaaS订阅本身是针对整个计费账户的，所以通过Partner接入的域名出现【请联系客户成功经理以启用适用于SaaS的SSL】时，只需要选择个通过官方NS激活的域名启用订阅后即可使用。这里猜测可能是Partner接入的商务权限交给了合作伙伴，方便下放优惠和服务那些，我们绕过去就行了。<img src="https://cdn.smoe.top/moe-cdn@latest/img/Cloudflare-CNAME/202203241914489.jpeg"></p><p>激活页面中文翻译比较滞后，从英文的可以看到免费额度已经进行更新，可以放心使用。</p><p><img src="https://cdn.smoe.top/moe-cdn@latest/img/Cloudflare-CNAME/202203241914410.jpeg"></p><h3 id="设置源站"><a href="#设置源站" class="headerlink" title="设置源站"></a>设置源站</h3><p>选择一个承载的域名<code>zone</code>点进去，依然是【SSL&#x2F;TLS】下的【自定义主机名】，首先要设置附加上域名的源站。在这之前要在承载的域名<code>zone</code>中设置一个子域名作为源站的来源，比如<code>origin.a.com</code>，在Partner或者官方DNS设置好它的源站（注意是是在CF里添加，和正常添加网站的流程一样）。</p><p><img src="https://cdn.smoe.top/moe-cdn@latest/img/Cloudflare-CNAME/202203241914202.jpeg"></p><p>SaaS这里的源站叫回退源（Fallback Origin），输入刚才设置的子域名并点击【Add Fallback Origin】，它会同步这个子域名设置的源站作为后续在此接入域名的源站。有些人就会问了，这样设置那不是后续SaaS添加的所有其他域名就只能用同一个源站了？答案确实是这样，为每个SaaS域名自定义源站需要Enterprise以上套餐，有多域名需求多开几个zone吧（苦笑）。</p><p><img src="https://cdn.smoe.top/moe-cdn@latest/img/Cloudflare-CNAME/202203241915326.jpeg"></p><h3 id="添加自定义主机名"><a href="#添加自定义主机名" class="headerlink" title="添加自定义主机名"></a>添加自定义主机名</h3><p>后续的工作就很简单了，点击【添加自定义主机名】，输入你要添加的未在CF接入的子域名。建议直接选择TXT验证，因为除了证书还有另一条TXT记录要添加，一起加上去比较方便。</p><p><img src="https://cdn.smoe.top/moe-cdn@latest/img/Cloudflare-CNAME/202203241915086.jpeg"></p><h3 id="验证域名所有权"><a href="#验证域名所有权" class="headerlink" title="验证域名所有权"></a>验证域名所有权</h3><p>添加完成后，按要求解析证书和主机名两个TXT记录，解析生效后10分钟左右即可验证通过，到此这个SaaS域名就正确的添加到了你的<code>zone</code>中并接入了CF。</p><p><img src="https://cdn.smoe.top/moe-cdn@latest/img/Cloudflare-CNAME/202203241915696.jpeg"></p><h3 id="SaaS域名解析"><a href="#SaaS域名解析" class="headerlink" title="SaaS域名解析"></a>SaaS域名解析</h3><p>添加进去的SaaS域名，CF并不会给你提供明确的CNAME供指向。如果是官方接入的可以直接CNAME到你刚刚设置的源站域名比如<code>origin.a.com</code>，通过Partner接入的直接解析到源域名对应的CNAME比如<code>origin.a.com.cdn.cloudflare.net</code>即可。其他的配置比如分线路解析、自选IP就可以按照自己的喜好去设置了，在此不过多赘述。</p><p>此外，对于防火墙规则、页面规则，直接将添加进的域名输入其中即可圈定范围，完成对于其细则的设置。</p><hr><h2 id="三、结语"><a href="#三、结语" class="headerlink" title="三、结语"></a>三、结语</h2><p>CloudFlare for SaaS是官方提供的一项非常方便的免费功能，弥补了早期未通过Partner接入只能强制NS接入的缺憾。有官方保障、灵活CNAME、免费的优点，也有源站不灵活等缺点，肯定还是不如已经通过Partner&#x2F;Plesk接入的域名灵活。</p><p>最后要感谢CF提供这样的免费功能，希望未来能够下放自定义源站的功能（想桃子），也欢迎大家在评论区分享你们对这项功能的其他应用方式，一起学习交流吧~</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>白嫖Railway的高性能免费vps</title>
      <link href="/2022/02/23/Railway-vps/"/>
      <url>/2022/02/23/Railway-vps/</url>
      
        <content type="html"><![CDATA[<p><strong>注意！本教程仅且只能用于研究与学习</strong></p><h2 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h2><ol><li><p>Railway每个月只有5刀的免费额度，请注意部署项目的资源使用量</p></li><li><p>虽然官网并没有指出大流量会怎么样，但为了账号着想，请避免大流量消耗</p></li><li><p>Railway官网虽然指出有资源限制，但经过测试发现只有内存限制为512M，可能跑一些软件会爆内存</p></li><li><p>vps本质为一个docker，限制比较多，请酌情考虑</p></li><li><p>请不要用同一个浏览器登录多个账号，不然可能导致全部账号都被封禁</p></li></ol><h2 id="必要的准备"><a href="#必要的准备" class="headerlink" title="必要的准备"></a>必要的准备</h2><ol><li><p>注册满180天的github账号，一个邮箱</p></li><li><p>一个可以使用脑子</p></li><li><p>可能需要的非境内环境</p></li></ol><h2 id="一、利用Ngrok做内网穿透"><a href="#一、利用Ngrok做内网穿透" class="headerlink" title="一、利用Ngrok做内网穿透"></a>一、利用Ngrok做内网穿透</h2><h3 id="1-1-注册-Railway-账号和-Ngrok-账号"><a href="#1-1-注册-Railway-账号和-Ngrok-账号" class="headerlink" title="1.1 注册 Railway 账号和 Ngrok 账号"></a>1.1 注册 Railway 账号和 Ngrok 账号</h3><ol><li><p>点击 <a href="https://railway.app/login">Railway</a> 进入网站注册 Railway 账号，直接使用  github 账号登录即可</p></li><li><p>点击 <a href="https://dashboard.ngrok.com/auth">Ngrok</a> 进入网站，点击下方的 <code>Sign up for free!</code> 注册账号</p></li><li><p>再次进入 <a href="https://dashboard.ngrok.com/auth">Ngrok</a> 复制保存你的 <code>Authtoken</code></p></li></ol><p>​    <strong>ps: Ngrok 的免费账号一个地区只能拥有一个内网穿透服务，所以想要部署多个项目请修改地区</strong></p><h3 id="1-2-部署"><a href="#1-2-部署" class="headerlink" title="1.2 部署"></a>1.2 部署</h3><ul><li><p>点击下方按钮部署<a href="https://railway.app/new/template?template=https://github.com/AkashiCoin/Railway-Ngrok&envs=NGROK_TOKEN,PORT,REGION&NGROK_TOKENDesc=%E5%9C%A8Ngrok%E6%B3%A8%E5%86%8C%E5%BE%97%E5%88%B0%E7%9A%84Authtoken&PORTDesc=%E4%BD%A0%E9%9C%80%E8%A6%81%E7%9A%84%E5%BC%80%E6%94%BE%E7%9A%84%E7%AB%AF%E5%8F%A3%EF%BC%8C%E9%BB%98%E8%AE%A480&PORTDefault=80&REGIONDesc=Ngrok%E7%9A%84%E5%9C%B0%E5%8C%BA%EF%BC%8C%E9%BB%98%E8%AE%A4jp%EF%BC%8C%E5%8F%AF%E9%80%89us/eu/ap/au/sa/jp/in&REGIONDefault=jp&referralCode=IGBnmG"><img src="https://railway.app/button.svg" alt="Deploy on Railway"></a></p></li><li><p><code>NGROK_TOKEN</code> 中填入在 <code>Ngrok</code> 注册得到的 <code>Authtoken</code></p></li><li><p><code>PORT</code> 中填入你搭建应用的端口，Railway 会自动将其转发到给你的域名上</p></li><li><p><code>REGION</code> 中填入隧道所在的地区，距离越近越好</p></li><li><p><img src="https://cdn.smoe.top/moe-cdn@latest/img/Railway-vps/202202230202715.png"></p></li><li><p>部署完成后会在 <code>Deploy log</code> 中得到ssh连接的地址和端口</p></li></ul><p><img src="https://cdn.smoe.top/moe-cdn@latest/img/Railway-vps/202202230207622.png"></p><h2 id="二、使用案列，部署Cloudreve私有云"><a href="#二、使用案列，部署Cloudreve私有云" class="headerlink" title="二、使用案列，部署Cloudreve私有云"></a>二、使用案列，部署Cloudreve私有云</h2><h3 id="2-1-安装Cloudreve"><a href="#2-1-安装Cloudreve" class="headerlink" title="2.1 安装Cloudreve"></a>2.1 安装Cloudreve</h3><ol><li>因为Cloudreve监听5212端口，但为使 Ngrok 隧道不冲突，所以首先我们去 Railway 删除本次部署</li></ol><p><img src="https://cdn.smoe.top/moe-cdn@latest/img/Railway-vps/202202230238738.png"></p><ol start="2"><li>再去项目中修改 <code>PORT</code> 为 <code>5212</code></li></ol><p><img src="https://cdn.smoe.top/moe-cdn@latest/img/Railway-vps/202202230233611.png"></p><ol start="3"><li>使用重新得到的ssh连接命令连接到vps，使用命令一键安装Cloudreve，可以使用 <code>tail -f cloudreve.log</code> 查看部署日志得到默认账号密码</li></ol><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> cloudreve &amp;&amp; <span class="built_in">cd</span> cloudreve</span><br><span class="line">wget https://pan.yropo.top/source/linux/cloudreve &amp;&amp; <span class="built_in">chmod</span> +x cloudreve</span><br><span class="line"><span class="built_in">nohup</span> ./cloudreve &gt;&gt; cloudreve.log 2&gt;&amp;1 &amp;</span><br></pre></td></tr></table></figure><h3 id="2-2-访问Cloudreve私有云"><a href="#2-2-访问Cloudreve私有云" class="headerlink" title="2.2 访问Cloudreve私有云"></a>2.2 访问Cloudreve私有云</h3><ul><li>最后访问 Railway给的域名</li></ul><p><img src="https://cdn.smoe.top/moe-cdn@latest/img/Railway-vps/202202230244576.png"></p><h3 id="2-3-自定义域名访问"><a href="#2-3-自定义域名访问" class="headerlink" title="2.3 自定义域名访问"></a>2.3 自定义域名访问</h3><ul><li>Railway 可以让我们自定义域名访问，只需要在 <code>Domains</code> 中点击 <code>Add Custom Domain</code> 添加自己的域名，并到自己的 DNS 解析商添加 <code>CNAME</code> 解析便可</li></ul><p><img src="https://cdn.smoe.top/moe-cdn@latest/img/Railway-vps/202202230249672.png"></p><ul><li>最后的效果图</li></ul><p><img src="https://cdn.smoe.top/moe-cdn@latest/img/Railway-vps/202202230252928.png"></p><p>​    <strong>ps: Cloudreve的配置还没完，可以自行谷歌配置 <code>Redis</code> 、 <code>MySql数据库</code> 、 <code>Aria2离线下载</code> ，另外这个vps的带宽有 10G 口，所以跑一些离线下载啥的还是挺给力<del>(小心被封)(不是</del></strong></p><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><ul><li><p>因为本质来讲这台 vps 是一个 docker 所以基本上 docker 能干的事他都能干，但实际应用中因为 512M 内存的限制一些程序会爆内存而被杀掉</p></li><li><p>但因为一个 docker，而且 railway 也可以 Dockerfile 部署，所以自行修改 Dockerfile 也能玩出一些花来<del>(比如说我自己github的一些项目)(不是</del></p><p><strong>ps: (22.02.23)虽然不知多久会死掉，但对目前来讲还能薅</strong></p><p><strong>ps:(22.05.19)目前来说Railway还在整治，之前部署过的服务还能用</strong></p></li></ul>]]></content>
      
      
      <categories>
          
          <category> vps </category>
          
      </categories>
      
      
        <tags>
            
            <tag> github </tag>
            
            <tag> vps </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>使用脚本自动抢Oracle ARM服务器，并使用tg机器人通知</title>
      <link href="/2022/01/17/OracleARM-tgbot/"/>
      <url>/2022/01/17/OracleARM-tgbot/</url>
      
        <content type="html"><![CDATA[<h2 id="需要用到的"><a href="#需要用到的" class="headerlink" title="需要用到的"></a>需要用到的</h2><ul><li>一台 vps 服务器</li><li>Terraform</li><li>oci-cli</li></ul><h3 id="一、安装-Terraform"><a href="#一、安装-Terraform" class="headerlink" title="一、安装 Terraform"></a>一、安装 Terraform</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">wget https://releases.hashicorp.com/terraform/0.15.5/terraform\_0.15.5\_linux\_amd64.zip</span><br></pre></td></tr></table></figure><p><strong>解压，并移动文件 terraform 到 &#x2F;usr&#x2F;bin 目录</strong></p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">unzip terraform\_0.15.5\_linux\_amd64.zip  </span><br><span class="line"><span class="built_in">mv</span> terraform /usr/bin</span><br></pre></td></tr></table></figure><p><strong>使用以下命令查看版本</strong></p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">terraform version</span><br></pre></td></tr></table></figure><p><strong>显示如下则安装成功</strong>  </p><p><img src="https://cdn.smoe.top/moe-cdn@latest/img/OracleARM-tgbot/202203251926112.png" alt="image-20220325192635053"></p><h3 id="二、安装-oci-cli-工具"><a href="#二、安装-oci-cli-工具" class="headerlink" title="二、安装 oci-cli 工具"></a>二、安装 oci-cli 工具</h3><p><strong>使用以下命令安装 oci-cli 工具</strong></p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">bash -c <span class="string">&quot;<span class="subst">$(curl –L https://raw.githubusercontent.com/oracle/oci-cli/master/scripts/install/install.sh)</span>&quot;</span></span><br></pre></td></tr></table></figure><p><strong>一直回车即可</strong><br><strong>当出现:</strong>  </p><p><img src="https://cdn.smoe.top/moe-cdn@latest/img/OracleARM-tgbot/202203251927086.png" alt="image-20220325192726043"></p><p><strong>这个时候，是在提示你输入 y 回车，会自动添加环境变量<br>之后又是一直回车。出现如下提示表示安装成功。可以用：<code>oci -v</code> 查询版本</strong>  </p><p><img src="https://cdn.smoe.top/moe-cdn@latest/img/OracleARM-tgbot/202203251928468.png" alt="image-20220325192805387"></p><h3 id="三、复制用户和租户的-ocid"><a href="#三、复制用户和租户的-ocid" class="headerlink" title="三、复制用户和租户的 ocid"></a>三、复制用户和租户的 ocid</h3><p><strong>甲骨文后台右上角 — 用户设置 — 点击用户以及租户，在信息栏中有我们需要的 ID，分别点击复制，可以保存在记事本备份好</strong>  </p><p><img src="https://cdn.smoe.top/moe-cdn@latest/img/OracleARM-tgbot/202203251928088.png" alt="image-20220325192841994"></p><p><img src="https://cdn.smoe.top/moe-cdn@latest/img/OracleARM-tgbot/202203251929827.png" alt="image-20220325192904724"></p><h3 id="四、配置-cli"><a href="#四、配置-cli" class="headerlink" title="四、配置 cli"></a>四、配置 cli</h3><p><strong>输入如下代码开始配置，配置的路径默认在 root 目录</strong></p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">oci setup config  </span><br></pre></td></tr></table></figure><p><strong>具体配置看下面</strong></p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">Enter a location <span class="keyword">for</span> your config \[/root/.oci/config\]:   </span><br><span class="line">Enter a user OCID: <span class="comment">#输入你的用户OCID  </span></span><br><span class="line">Enter a tenancy OCID: <span class="comment">#输入你的租户OCID  </span></span><br><span class="line">Enter a region by index or name(e.g.  </span><br><span class="line">1: ap-chiyoda-1, 2: ap-chuncheon-1, 3: ap-hyderabad-1, 4: ap-melbourne-1, 5: ap-mumbai-1,6: ap-osaka-1, 7: ap-seoul-1, 8: ap-sydney-1, 9: ap-tokyo-1, 10: ca-montreal-1,11: ca-toronto-1, 12: eu-amsterdam-1, 13: eu-frankfurt-1, 14: eu-zurich-1, 15: me-dubai-1,16: me-jeddah-1, 17: sa-santiago-1, 18: sa-saopaulo-1, 19: uk-cardiff-1, 20: uk-gov-cardiff-1,21: uk-gov-london-1, 22: uk-london-1, 23: us-ashburn-1, 24: us-gov-ashburn-1, 25: us-gov-chicago-1,26: us-gov-phoenix-1, 27: us-langley-1, 28: us-luke-1, 29: us-phoenix-1,30: us-sanjose-1): 9  <span class="comment">#这里选择你的区域  </span></span><br><span class="line">Do you want to generate a new API Signing RSA key pair? (If you decline you will be asked to supply the path to an existing key.) \[Y/n\]: y  <span class="comment">#输入y生成公钥  </span></span><br><span class="line">Enter a directory <span class="keyword">for</span> your keys to be created \[/root/.oci\]:   </span><br><span class="line">Enter a name <span class="keyword">for</span> your key \[oci\_api\_key\]:   </span><br><span class="line">Public key written to: /root/.oci/oci\_api\_key\_public.pem  </span><br><span class="line">Enter a passphrase <span class="keyword">for</span> your private key (empty <span class="keyword">for</span> no passphrase):   </span><br><span class="line">Private key written to: /root/.oci/oci\_api\_key.pem  </span><br><span class="line">Fingerprint:   </span><br><span class="line">Config written to /root/.oci/config</span><br><span class="line"></span><br><span class="line"> If you haven<span class="string">&#x27;t already uploaded your API Signing public key through the  </span></span><br><span class="line"><span class="string"> console, follow the instructions on the page linked below in the section</span></span><br><span class="line"><span class="string"> &#x27;</span>How to upload the public key<span class="string">&#x27;:</span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string"> https://docs.cloud.oracle.com/Content/API/Concepts/apisigningkey.htm#How2 </span></span><br></pre></td></tr></table></figure><p><strong>复制生成的公钥，使用以下命令获取公钥</strong></p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cat</span> /root/.oci/oci\_api\_key\_public.pem</span><br></pre></td></tr></table></figure><p>把显示出来的内容复制，并且添加到<br>甲骨文后台 — 用户设置 — 资源 —API 秘钥 — 添加 API 秘钥  </p><p><img src="https://cdn.smoe.top/moe-cdn@latest/img/OracleARM-tgbot/202203251929061.png" alt="image-20220325192928930"></p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">oci iam availability-domain list</span><br></pre></td></tr></table></figure><p><strong>提示以下内容则是配置正确</strong>  </p><p><img src="https://cdn.smoe.top/moe-cdn@latest/img/OracleARM-tgbot/202203251930412.png" alt="image-20220325193030333"></p><h3 id="五、Terraform-环境初始化"><a href="#五、Terraform-环境初始化" class="headerlink" title="五、Terraform 环境初始化"></a>五、Terraform 环境初始化</h3><h4 id="1、我们先获取甲骨文的-Terraform-脚本"><a href="#1、我们先获取甲骨文的-Terraform-脚本" class="headerlink" title="1、我们先获取甲骨文的 Terraform 脚本"></a>1、我们先获取甲骨文的 Terraform 脚本</h4><p><strong>点击 创建 VM 实例</strong>  </p><p><img src="https://cdn.smoe.top/moe-cdn@latest/img/OracleARM-tgbot/202203251930319.png" alt="image-20220325193049208"></p><p><img src="https://cdn.smoe.top/moe-cdn@latest/img/OracleARM-tgbot/202203251931568.webp" alt="image-1623397155148"></p><p><img src="https://cdn.smoe.top/moe-cdn@latest/img/OracleARM-tgbot/202203251932634.png" alt="image-20220325193216499"></p><p><strong>一直下一步</strong>  </p><p><img src="https://cdn.smoe.top/moe-cdn@latest/img/OracleARM-tgbot/202203251932023.png" alt="image-20220325193247933"></p><p><img src="https://cdn.smoe.top/moe-cdn@latest/img/OracleARM-tgbot/202203251933666.png" alt="image-20220325193323550"></p><p><img src="https://cdn.smoe.top/moe-cdn@latest/img/OracleARM-tgbot/202203251933744.png" alt="image-20220325193345709"></p><h4 id="2、配置-Terraform"><a href="#2、配置-Terraform" class="headerlink" title="2、配置 Terraform"></a>2、配置 Terraform</h4><p><strong>使用以下命令创建 Terraform 运行目录</strong></p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> /opt/</span><br><span class="line"><span class="built_in">mkdir</span> terraform-learning &amp;&amp; <span class="built_in">cd</span> terraform-learning</span><br></pre></td></tr></table></figure><p><strong>将刚刚解压到桌面的 main.tf 文件 上传到这个目录</strong>  </p><p><img src="https://cdn.smoe.top/moe-cdn@latest/img/OracleARM-tgbot/202203251934382.png" alt="image-20220325193405305"></p><p><strong>将目录设置为 Terraform 运行目录</strong></p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">terraform init</span><br></pre></td></tr></table></figure><p><strong>以上完成后，开始创建任务，用命令：（注意还是在 &#x2F;opt&#x2F;terraform-learning）</strong></p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">terraform apply</span><br></pre></td></tr></table></figure><p><strong>执行完上面命令之后，会提示输入 yes</strong>  </p><p><img src="https://cdn.smoe.top/moe-cdn@latest/img/OracleARM-tgbot/202203251934124.png" alt="image-20220325193426935"></p><p><strong>上图还能看到 API 返回 Error Message: Out of host capacity, 提示主机容量不足，下面就用脚本来不停刷就行了</strong></p><h3 id="六、部署脚本"><a href="#六、部署脚本" class="headerlink" title="六、部署脚本"></a>六、部署脚本</h3><p><strong>终于可以部署脚本来抢服务器了，请先获取 telegram 账号 id，并且关注通知机器人 @oracle_message_bot<br>TG id 请通过 @userinfobot 机器人获取<br>在 root 目录下新建一个 terraform.sh</strong></p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> /root  </span><br><span class="line">vi terraform.sh</span><br></pre></td></tr></table></figure><p><strong>写入以下内容</strong></p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"> </span><br><span class="line">path=<span class="string">&#x27;/opt/terraform-learning/&#x27;</span></span><br><span class="line">FIND_FILE=<span class="string">&quot;/root/terraform.log&quot;</span> <span class="comment">#日志文件位置</span></span><br><span class="line">FIND_STR=<span class="string">&quot;Apply complete!&quot;</span></span><br><span class="line"><span class="built_in">cd</span> <span class="variable">$path</span> &amp;&amp;</span><br><span class="line"><span class="keyword">while</span> <span class="literal">true</span></span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&#x27;yes&#x27;</span> | terraform apply -lock=<span class="literal">false</span></span><br><span class="line">    <span class="built_in">sleep</span> 1s</span><br><span class="line">    <span class="keyword">if</span> [ `grep -c <span class="string">&quot;<span class="variable">$FIND_STR</span>&quot;</span> <span class="variable">$FIND_FILE</span>` -ne <span class="string">&#x27;0&#x27;</span> ];<span class="keyword">then</span></span><br><span class="line">        <span class="comment"># tg通知并停止</span></span><br><span class="line">        curl --location --request POST <span class="string">&#x27;https://api.telegram.org/bot2041773532:AAHv_glHg4eHFhyQBD7kZp1qhheYP4nmeI8/sendMessage&#x27;</span> \</span><br><span class="line">        --form <span class="string">&#x27;text=服务器创建成功！&#x27;</span> \</span><br><span class="line">        --form <span class="string">&#x27;chat_id=你的tg id&#x27;</span> \</span><br><span class="line">        --form <span class="string">&#x27;parse_mode=markdown&#x27;</span></span><br><span class="line">        <span class="built_in">exit</span> 0</span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure><p>ps: HM的脚本并不可用，所以我对脚本进行了修改</p><p><strong>给 Shell 脚本赋予执行权限：</strong></p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">chmod</span> +x terraform.sh</span><br></pre></td></tr></table></figure><p><strong>使用以下命令后台执行脚本</strong></p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">nohup</span> ./terraform.sh &gt;&gt; terraform.log 2&gt;&amp;1 &amp;</span><br></pre></td></tr></table></figure><h4 id="如何结束脚本？"><a href="#如何结束脚本？" class="headerlink" title="如何结束脚本？"></a>如何结束脚本？</h4><p><strong>使用以下命令结束脚本</strong></p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">pkill terraform</span><br></pre></td></tr></table></figure><blockquote><p>转载自 HM 的博客 <a href="https://him.plus/archives/274">https://him.plus/archives/274</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> vps </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 科学上网 </tag>
            
            <tag> vps </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>利用GitHub+jsdelivr搭建一个图床</title>
      <link href="/2022/01/16/GitHub-jsdelivr-img/"/>
      <url>/2022/01/16/GitHub-jsdelivr-img/</url>
      
        <content type="html"><![CDATA[<blockquote><p>转载自 Daibi_mua <a href="https://blog.keepdai.cn/jsdelivr.html">https://blog.keepdai.cn/jsdelivr.html</a><br>Daibi_mua 大佬的博客 <a href="https://keepdai.cn/">https://keepdai.cn</a></p></blockquote><h1 id="图床的选择"><a href="#图床的选择" class="headerlink" title="图床的选择:"></a><a href="#%E5%9B%BE%E5%BA%8A%E7%9A%84%E9%80%89%E6%8B%A9" title="图床的选择:"></a>图床的选择:</h1><ol><li>微博图床:以前我是经常用的,后来开启防盗链就开始麻烦起来了,所以果断放弃</li><li>SM.MS:稳定,经营了四年多了,但是是国外服务器,速度堪忧</li><li>大厂储存服务:例如七牛云、又拍云、腾讯云 COS、阿里云 OSS 等，操作繁琐，又是实名认证又是域名备案的，麻烦，而且还要花钱（有钱又不怕麻烦的当我没说）</li><li>GitHub 图床:免费，但是国内访问速度慢（不过没关系，利用 <code>jsDelivr</code> 提供的免费的 CDN 加速 速度足够了）</li></ol><h1 id="方法"><a href="#方法" class="headerlink" title="方法"></a><a href="#%E6%96%B9%E6%B3%95" title="方法"></a>方法</h1><h2 id="新建-GitHub-仓库"><a href="#新建-GitHub-仓库" class="headerlink" title="新建 GitHub 仓库"></a><a href="#%E6%96%B0%E5%BB%BA-GitHub-%E4%BB%93%E5%BA%93" title="新建 GitHub 仓库"></a>新建 GitHub 仓库<a href="https://cdn.jsdelivr.net/gh/Daibi-mua/cdn2@424fd2eb0c23da9b0618116308bf4088b55ef21d/2021/01/24/d6776c6f890e614598c8c67d677a6a13.png"><img src="https://cdn.jsdelivr.net/gh/Daibi-mua/cdn2@424fd2eb0c23da9b0618116308bf4088b55ef21d/2021/01/24/d6776c6f890e614598c8c67d677a6a13.png"></a></h2><p><img src="https://cdn.jsdelivr.net/gh/Daibi-mua/cdn2@29ae88b26443b7c1f7403ff2c8c1a5b4f94da79c/2021/01/24/ed784289cf94c93bae85e996f6630cbe.png" alt="![](https://cdn.jsdelivr.net/gh/Daibi-mua/cdn2@main/loading.gif)"></p><h2 id="生成一个-Token"><a href="#生成一个-Token" class="headerlink" title="生成一个 Token"></a><a href="#%E7%94%9F%E6%88%90%E4%B8%80%E4%B8%AA-Token" title="生成一个 Token"></a>生成一个 Token</h2><ul><li><p>点击用户头像 -&gt; 选择 设置<img src="https://cdn.jsdelivr.net/gh/Daibi-mua/cdn2@0e39addd9169fc762ada516c2790bc5725a7df9d/2021/01/24/d0d3822be5af7e9851a6461dd95fc4db.png" alt="![](https://cdn.jsdelivr.net/gh/Daibi-mua/cdn2@main/loading.gif)"></p></li><li><p>点击开发者设置<img src="https://cdn.jsdelivr.net/gh/Daibi-mua/cdn2@c7e4542abc39b700cf6638e92dd7cb72d220b29d/2021/01/24/a0912af7c97647331fe9b25677ac7367.png" alt="![](https://cdn.jsdelivr.net/gh/Daibi-mua/cdn2@main/loading.gif)"></p></li><li><p>点击 Personal access tokens<img src="https://cdn.jsdelivr.net/gh/Daibi-mua/cdn2@7cb21955b032aee0e574638c210c5ff12561d931/2021/01/24/0cad3ab9effa2738a4e99b6b8e8de966.png" alt="![](https://cdn.jsdelivr.net/gh/Daibi-mua/cdn2@main/loading.gif)"></p></li><li><p>点击 Generate new token<img src="https://cdn.jsdelivr.net/gh/Daibi-mua/cdn2@c88b9dc8c04c256dd2f8ab4a0ac4a898b6d20c55/2021/01/24/9f84a1744ad9d49f8b91c7105d55ae4b.png" alt="![](https://cdn.jsdelivr.net/gh/Daibi-mua/cdn2@main/loading.gif)"></p></li><li><p>填写 Token 描述，勾选 repo 然后点击 Generate token 生成一个 Token</p></li></ul><p><img src="https://cdn.jsdelivr.net/gh/Daibi-mua/cdn2@64b1db98bc6ccba37d0cbe71f8d0128f52219e30/2021/01/24/8ead9e9590df7c8801b75014d83018fc.png" alt="![](https://cdn.jsdelivr.net/gh/Daibi-mua/cdn2@main/loading.gif)"></p><ul><li>获取 Token 密钥&gt; 注意这个 Token 只会显示一次，自己先保存下来，或者等后面配置好 PicGo 后再关闭此网页</li></ul><h2 id="配置-PicGo-并使用-jsdelivr-作为-CDN-加速"><a href="#配置-PicGo-并使用-jsdelivr-作为-CDN-加速" class="headerlink" title="配置 PicGo 并使用 jsdelivr 作为 CDN 加速"></a><a href="#%E9%85%8D%E7%BD%AE-PicGo-%E5%B9%B6%E4%BD%BF%E7%94%A8-jsdelivr-%E4%BD%9C%E4%B8%BA-CDN-%E5%8A%A0%E9%80%9F" title="配置 PicGo 并使用 jsdelivr 作为 CDN 加速"></a>配置 PicGo 并使用 jsdelivr 作为 CDN 加速</h2><blockquote><p>前往下载 PicG（<a href="https://github.com/Molunerfinn/picgo/releases">点击下载</a>），安装好后开始配置图床</p></blockquote><p>设定仓库名：按照用户名&#x2F;图床仓库名 的格式填写</p><p>设定分支名：main</p><p>设定 Token：粘贴之前生成的 Token</p><p>指定存储路径：填写想要储存的路径，如 img&#x2F;，这样就会在仓库下创建一个名为 img 的文件夹，图片将会储存在此文件夹中</p><p>设定自定义域名：它的的作用是，在图片上传后，PicGo 会按照自定义域名+上传的图片名的方式生成访问链接，放到粘贴板上，因为我们要使用 jsDelivr 加速访问，所以可以设置为<a href="https://cdn.jsdelivr.net/gh/%E7%94%A8%E6%88%B7%E5%90%8D/%E5%9B%BE%E5%BA%8A%E4%BB%93%E5%BA%93%E5%90%8D@%E5%88%86%E6%94%AF">https://cdn.jsdelivr.net/gh/用户名/图床仓库名@分支</a> #默认是 main</p><p><img src="https://cdn.jsdelivr.net/gh/Daibi-mua/cdn2@bf4e584c882f501b6e8bb3ae55b5a17df9b73d33/2021/01/24/1ce5e15083a20654d8d694f58ffa2fe6.png" alt="![](https://cdn.jsdelivr.net/gh/Daibi-mua/cdn2@main/loading.gif)"></p><h2 id="使用第三方图床使用-GitHub-图床"><a href="#使用第三方图床使用-GitHub-图床" class="headerlink" title="使用第三方图床使用 GitHub 图床"></a><a href="#%E4%BD%BF%E7%94%A8%E7%AC%AC%E4%B8%89%E6%96%B9%E5%9B%BE%E5%BA%8A%E4%BD%BF%E7%94%A8GitHub%E5%9B%BE%E5%BA%8A" title="使用第三方图床使用GitHub图床"></a>使用第三方图床使用 GitHub 图床</h2><p>因为 GitHub 服务器在国外,国内经常抽风,导致上传失败,这时候就可以自己白嫖一个国外服务器然后搭建一个 api 通过这个 api 上传到 GitHub,<a href="https://github.com/yumusb/autoPicCdn">个人版本</a>;当然如果你嫌烦,可以用<a href="https://chuibi.cn/">吹逼图床</a></p><ul><li><p>在 picGo 下载插件<img src="https://cdn.jsdelivr.net/gh/Daibi-mua/cdn2@d285a3836b5aee2038800f37062378ff61991e13/2021/01/24/89fdd9c4b649e26a5a2cd90cc673ae92.png" alt="![](https://cdn.jsdelivr.net/gh/Daibi-mua/cdn2@main/loading.gif)"></p></li><li><p>然后登录使用 GitHub 登录吹逼图床,然后再次点击用户图标进行设置</p></li></ul><p><img src="https://cdn.jsdelivr.net/gh/Daibi-mua/cdn2@3be766c8839bcf069b22725aabbedf9aafbdffed/2021/01/24/1d2f4f4c715c41d103725fa59cc7b133.png" alt="![](https://cdn.jsdelivr.net/gh/Daibi-mua/cdn2@main/loading.gif)"></p><ul><li>然后在主界面复制你的接口[注意不要泄露这个接口,不然他人就可以使用你的接口上传图片]</li></ul><p><img src="https://cdn.jsdelivr.net/gh/Daibi-mua/cdn2@5efcd17edd183aadef21681265ac0866799ae177/2021/01/24/a8a71bcca4cd13fbb4b6e7fb7ecacf66.png" alt="![](https://cdn.jsdelivr.net/gh/Daibi-mua/cdn2@main/loading.gif)"></p><ul><li>回到 picGo 进行配置</li></ul><p><img src="https://cdn.jsdelivr.net/gh/Daibi-mua/cdn2@7f388e99a1034a766166b9f872d016263d6476c9/2021/01/24/857847e0e6ee0e1385bc1abdf5eccf3f.png" alt="![image-20210124132702587](https://cdn.jsdelivr.net/gh/Daibi-mua/cdn2@main/loading.gif)"></p><p>接下来你就可以愉快的使用 GitHub+jsdelivr 当作图库啦</p><blockquote><p>值得注意的是,理论上讲 GitHub 仓库大小是 100g,但到了 1g 就会有人工审核,而使用 jsdelivr 加速的文件到达 50m[也就是仓库大小]仓库里的资源就有可能失效,仓库理论上是无限建的,到了 50m 可以新建一个新的来达到白嫖的效果</p></blockquote><p>此外 PicGo 还有相册功能，可以对已上传的图片进行删除，修改链接等快捷操作,PicGo 还可以生成不同格式的链接、支持批量上传、快捷键上传、自定义链接格式、上传前重命名等，更多功能自己去探索吧！</p><p>完成之后就可以畅快书写，上传直接快捷键完成，复制粘贴，再也不用手动去拖动图片上传了，更过功能尽情去体验吧！</p>]]></content>
      
      
      <categories>
          
          <category> 网站 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> github </tag>
            
            <tag> jsdelivr </tag>
            
            <tag> 图床 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>利用heroku + cloudflare搭建v2ray免费科学上网</title>
      <link href="/2022/01/16/heroku-v2ray-cloudflare/"/>
      <url>/2022/01/16/heroku-v2ray-cloudflare/</url>
      
        <content type="html"><![CDATA[<p><strong>注意！本教程仅且只能用于研究与学习</strong></p><blockquote><p><strong>[22&#x2F;5&#x2F;29] 由于 heroku 出手整治, v2ray项目大量被封，现转用xray项目 <a href="https://www.smoe.top/2022/05/29/heroku-xray-cloudflare/">利用heroku + cloudflare搭建xray免费科学上网</a></strong></p></blockquote><h2 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h2><ol><li><p>Heroku 免费套餐每月只有 550 小时的免费时间，适合在非常时期当做备胎使用</p></li><li><p>Heroku 对流量检测有些严格，请避免大流量消耗</p></li><li><p>引用项目原作者的话：Heroku 提供给我们免费的服务，我们不应该滥用它</p></li><li><p>Heroku 免费容器未使用超过一段时间（三十分钟左右）就会休眠</p></li></ol><h2 id="必要的准备"><a href="#必要的准备" class="headerlink" title="必要的准备"></a>必要的准备</h2><ol><li><p>一个非国内邮箱地址</p></li><li><p>Heroku 与 Cloudflare 国内访问速度并不理想，可使用非国内网络环境</p></li><li><p>翻译工具，也可以使用 Google Chrome 浏览器</p></li><li><p>V2Ray 软件；<a href="https://github.com/2dust/v2rayN/releases">点击下载</a></p></li></ol><h2 id="一、服务端部署"><a href="#一、服务端部署" class="headerlink" title="一、服务端部署"></a>一、服务端部署</h2><h3 id="1-1-注册-Heroku-账户"><a href="#1-1-注册-Heroku-账户" class="headerlink" title="1.1 注册 Heroku 账户"></a>1.1 注册 Heroku 账户</h3><ul><li><p>很简单，根据官网的提示操作就行:<a href="https://signup.heroku.com/">点击注册</a></p></li><li><p>注意：请使用外网 IP 注册，且请准备好翻译工具，并在收到邮件后激活账户；注册时不能使用 QQ 邮箱</p></li></ul><h3 id="1-2-在-Heroku-部署-v2ray"><a href="#1-2-在-Heroku-部署-v2ray" class="headerlink" title="1.2 在 Heroku 部署 v2ray"></a>1.2 在 Heroku 部署 v2ray</h3><ul><li><del>点击下方按钮部署应用<a href="https://dashboard.heroku.com/new?template=https://github.com/AkashiCoin/heroku-v2ray"><img src="https://www.herokucdn.com/deploy/button.png" alt="Deploy"></a></del></li></ul><p><strong>ps: （2022.01.16）最近大佬们的仓库都被 heroku 给 ban 了，所以想要使用可以自建一个仓库，<del>然后 import 大佬 Fbclswl0827 的 heroku-v2ray 项目自行部署</del></strong></p><p><strong>ps: 上面部署方式是我自己的仓库</strong></p><h4 id="Extra-创建-github-项目仓库"><a href="#Extra-创建-github-项目仓库" class="headerlink" title="Extra 创建 github 项目仓库"></a>Extra 创建 github 项目仓库</h4><ol><li><p>打开 <a href="https://github.com/">github</a> 登录你自己的账号</p></li><li><p>点击左边的 <code>New</code> 创建一个仓库</p></li></ol><p><img src="https://cdn.smoe.top/moe-cdn@latest/img/heroku-v2ray-cloudflare/202202230018715.png"></p><ol start="3"><li>在打开的页面中填写仓库名称，然后点击 <code>Create repository</code> 创建仓库</li></ol><p><img src="https://cdn.smoe.top/moe-cdn@latest/img/heroku-v2ray-cloudflare/202202230019403.png"></p><ol start="4"><li>在新打开的页面下翻找到 <code>import</code></li></ol><p><img src="https://cdn.smoe.top/moe-cdn@latest/img/heroku-v2ray-cloudflare/202202230020258.png"></p><ol start="5"><li>在 <code>Your old repository’s clone URL</code> 中填入 <code>https://github.com/bclswl0827/v2ray-heroku.git</code>, 随后点击 <code>Begin import</code> 导入</li></ol><p><img src="https://cdn.smoe.top/moe-cdn@latest/img/heroku-v2ray-cloudflare/202202230020282.png"></p><ol start="6"><li>导入完成后，进入仓库，修改 <code>README.md</code> ，修改完成后点击下方 <code>Commit changes</code> 提交</li></ol><p><img src="https://cdn.smoe.top/moe-cdn@latest/img/heroku-v2ray-cloudflare/202202230020762.png"></p><ol start="7"><li>最后进入仓库点击 <code>Deploy to Heroku</code> 图标开始部署</li></ol><ul><li>App name 随便填写，可用就行；Choose a region 就是你的服务器地区；UUID 可自行修改（建议修改，使用默认 UUID 会使节点暴露在危险下）；然后点击<code>Deploy app</code>系统会自动部署</li></ul><p><img src="https://cdn.smoe.top/moe-cdn@latest/img/heroku-v2ray-cloudflare/202201161405003.png" alt="1.png"></p><ul><li>稍微等待一会儿，几秒的样子，直到全部打勾变绿</li></ul><p><img src="https://cdn.smoe.top/moe-cdn@latest/img/heroku-v2ray-cloudflare/202201161457921.png" alt="2.png"></p><h2 id="二、客户端使用"><a href="#二、客户端使用" class="headerlink" title="二、客户端使用"></a>二、客户端使用</h2><h3 id="2-1-相关配置信息"><a href="#2-1-相关配置信息" class="headerlink" title="2.1 相关配置信息"></a>2.1 相关配置信息</h3><ul><li>点击 Manage App 进入你的项目；或者在<a href="https://dashboard.heroku.com/apps">https://dashboard.heroku.com/apps</a>中找的到你的项目并进入</li></ul><p><strong>注意：你会看到一个项目，点击上方的<code>Settings</code>进入，查看你的 V2Ray 具体配置，如图</strong></p><p><img src="https://cdn.smoe.top/moe-cdn@latest/img/heroku-v2ray-cloudflare/202201161458347.png"></p><ul><li>点击<code>Reveal Config Vars</code>显示 V2RrayN 相关配置信息，如图</li></ul><p><img src="https://cdn.smoe.top/moe-cdn@latest/img/heroku-v2ray-cloudflare/202201161500120.png"></p><p><img src="https://cdn.smoe.top/moe-cdn@latest/img/heroku-v2ray-cloudflare/202201161501582.png"></p><h3 id="2-2-V2rayN-配置"><a href="#2-2-V2rayN-配置" class="headerlink" title="2.2 V2rayN 配置"></a>2.2 V2rayN 配置</h3><ul><li>开始配置 V2Ray，如果你记好了以上两个（那串字母 UUID 和二级域名 xxxx.herokuapp.com）</li></ul><p><strong>ps: 二级域名不用加<code>https://</code>，直接填域名就好</strong></p><p><img src="https://cdn.smoe.top/moe-cdn@latest/img/heroku-v2ray-cloudflare/202201161519886.png"></p><ul><li>最基础的配置完成了，可以发现节点的速度慢的令人发指，接下来我们利用 cloudflare + 自选 ip 进行加速</li></ul><h2 id="三、Cloudflare-Workers-反代加速"><a href="#三、Cloudflare-Workers-反代加速" class="headerlink" title="三、Cloudflare Workers 反代加速"></a>三、Cloudflare Workers 反代加速</h2><p><strong>对速度有要求的人群<del>（强迫症患者）</del>可以看一下；主要是使用 Cloudflare Workers 加速，虽然免费套餐有调用限制，但是一般个人使用不可能用完</strong></p><h3 id="3-1-创建-Cloudflare-Workers"><a href="#3-1-创建-Cloudflare-Workers" class="headerlink" title="3.1 创建 Cloudflare Workers"></a>3.1 创建 Cloudflare Workers</h3><ol><li>在<a href="https://dash.cloudflare.com/">Cloudflare Workers</a>中创建一个 Workers</li></ol><p><img src="https://cdn.smoe.top/moe-cdn@latest/img/heroku-v2ray-cloudflare/202201161538514.png"><br><img src="https://cdn.smoe.top/moe-cdn@latest/img/heroku-v2ray-cloudflare/202201161542604.png"></p><p>点击<code>快速编辑</code>进入项目编辑<br><img src="https://cdn.smoe.top/moe-cdn@latest/img/heroku-v2ray-cloudflare/202201161545214.png"></p><ol start="2"><li>将原有的示例代码全部删除，复制如下代码，并将第四行的 xxx.herokuapp.com 替换为你的 V2Ray 的地址 ps: 不需要<code>https://</code></li></ol><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title function_">addEventListener</span>(<span class="string">&quot;fetch&quot;</span>, <span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> url = <span class="keyword">new</span> <span class="title function_">URL</span>(event.<span class="property">request</span>.<span class="property">url</span>);</span><br><span class="line">  url.<span class="property">hostname</span> = <span class="string">&quot;xxxx.herokuapp.com&quot;</span>;</span><br><span class="line">  <span class="keyword">let</span> request = <span class="keyword">new</span> <span class="title class_">Request</span>(url, event.<span class="property">request</span>);</span><br><span class="line">  event.<span class="title function_">respondWith</span>(<span class="title function_">fetch</span>(request));</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><ol start="3"><li>点击右侧的<code>发送</code>按钮，看最后一行是否出现了<code>Bad Request</code>，出现则代表成功</li></ol><p><img src="https://cdn.smoe.top/moe-cdn@latest/img/heroku-v2ray-cloudflare/202201161554105.png"></p><ul><li>成功后，点击<code>保存并部署</code>，并记下你的 Workers 二级域名</li></ul><h3 id="3-2-修改-V2rayN-中的配置"><a href="#3-2-修改-V2rayN-中的配置" class="headerlink" title="3.2 修改 V2rayN 中的配置"></a>3.2 修改 V2rayN 中的配置</h3><ul><li>把 V2RayN 中原来的域名改为现在的 Workers 域名就行了，其实利用 Cloudflare Workers 进行反代以后速度已经可以了，但是优选 ip 以后速度会更加快<br><img src="https://cdn.smoe.top/moe-cdn@latest/img/heroku-v2ray-cloudflare/202201161557052.png"></li></ul><p><strong>对速度有更高追求以及不怕折腾的人可以接着往下看</strong></p><h2 id="四、Cloudflare-自选-IP"><a href="#四、Cloudflare-自选-IP" class="headerlink" title="四、Cloudflare 自选 IP"></a>四、Cloudflare 自选 IP</h2><blockquote><p>点击下载<a href="https://github.com/badafans/better-cloudflare-ip/releases/">IP 自选程序</a>，解压，在 Windows 系统下运行</p></blockquote><p>其他的<code>使用说明.txt</code>文件中都有说，在此就不过多赘述</p><p>最后，配置 V2Ray：</p><p><img src="https://cdn.smoe.top/moe-cdn@latest/img/heroku-v2ray-cloudflare/202201161617481.png"></p><h3 id="注意事项-1"><a href="#注意事项-1" class="headerlink" title="注意事项"></a><a href="#%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9" title="注意事项"></a>注意事项</h3><ul><li>由于各地的网络情况每天都不同，所以每天（甚至是每半天）的最优节点都不尽相同；但对于一个应急用的已经足够了</li></ul><h2 id="效果图"><a href="#效果图" class="headerlink" title="效果图"></a><a href="#%E6%95%88%E6%9E%9C%E5%9B%BE" title="效果图"></a>效果图</h2><ul><li>折腾完一圈后的测速：</li></ul><p><img src="https://cdn.smoe.top/moe-cdn@latest/img/heroku-v2ray-cloudflare/202201161619689.png"><em>可见 heroku 是利用的 amazon 服务器，而这个速度对于免费的来说已经相当快了</em></p><ul><li>实际使用效果图：</li></ul><p><img src="https://cdn.smoe.top/moe-cdn@latest/img/heroku-v2ray-cloudflare/202201161623744.png"><em>从 YouTube 的视频测试来看还是不错的</em></p><p><strong>比某些大部分的机场免费套餐都好，甚至直逼少数机场的初级付费套餐；对于我这样的穷学生来讲已经够用的。</strong></p>]]></content>
      
      
      <categories>
          
          <category> 科学上网 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 科学上网 </tag>
            
            <tag> v2ray </tag>
            
            <tag> heroku </tag>
            
            <tag> cloudflare </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo主题美化-鼠标点击特效</title>
      <link href="/2020/12/27/Hexo-click/"/>
      <url>/2020/12/27/Hexo-click/</url>
      
        <content type="html"><![CDATA[<p><strong>Hexo主题美化-鼠标点击特效</strong></p><p>从各个站点里收集了以下四个比较常用的鼠标点击特效：</p><ul><li>礼花特效</li></ul><p><img src="https://pan.yropo.top/img/20201229/cursor-fireworks.gif" alt="fireworks">  </p><p>下载：<a href="https://pan.yropo.top/source/js/firework.js">礼花特效</a></p><ul><li>爆炸特效</li></ul><p><img src="https://pan.yropo.top/img/20201229/cursor-explosion.gif" alt="explosin">  </p><p>下载：<a href="https://pan.yropo.top/source/js/explosion.min.js">爆炸特效</a></p><ul><li>浮出爱心</li></ul><p><img src="https://pan.yropo.top/img/20201229/cursor-love.gif" alt="love">  </p><p>下载：<a href="https://pan.yropo.top/source/js/love.min.js">浮出爱心</a></p><ul><li>浮出文字</li></ul><p><img src="https://pan.yropo.top/img/20201229/cursor-text.gif" alt="cursor">  </p><p>下载：<a href="https://pan.yropo.top/source/js/text.js">浮出文字</a></p><p>将脚本文件放置于 <code>themes/next/source/js/cursor</code> 目录下（如果没有相应的目录，需要自行创建，可以根据自己习惯命名）。</p><p>在主题自定义布局文件 <code>themes/next/layout/_custom/custom.swig</code> （如果没有 custom.swig 文件，需自行创建）中添加如下代码：</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&#123;# 鼠标点击特效 #&#125;</span><br><span class="line">&#123;% <span class="keyword">if</span> theme.<span class="property">cursor_effect</span> == <span class="string">&quot;fireworks&quot;</span> %&#125;</span><br><span class="line">  &lt;script <span class="keyword">async</span> src=<span class="string">&quot;/js/cursor/fireworks.js&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line">&#123;% elseif theme.<span class="property">cursor_effect</span> == <span class="string">&quot;explosion&quot;</span> %&#125;</span><br><span class="line">  &lt;canvas <span class="keyword">class</span>=<span class="string">&quot;fireworks&quot;</span> style=<span class="string">&quot;position: fixed;left: 0;top: 0;z-index: 1; pointer-events: none;&quot;</span> &gt;&lt;/canvas&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;//cdn.bootcss.com/animejs/2.2.0/anime.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">async</span> <span class="attr">src</span>=<span class="string">&quot;/js/cursor/explosion.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">&#123;% elseif theme.<span class="property">cursor_effect</span> == <span class="string">&quot;love&quot;</span> %&#125;</span><br><span class="line">  &lt;script <span class="keyword">async</span> src=<span class="string">&quot;/js/cursor/love.min.js&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line">&#123;% elseif theme.<span class="property">cursor_effect</span> == <span class="string">&quot;text&quot;</span> %&#125;</span><br><span class="line">  &lt;script <span class="keyword">async</span> src=<span class="string">&quot;/js/cursor/text.js&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line">&#123;% endif %&#125;</span><br></pre></td></tr></table></figure><p>在 <code>themes/next/layout/_layout.swig</code> 文件 body 标签中添加如下代码：</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">    ...</span><br><span class="line">    &#123;% include <span class="string">&#x27;_custom/custom.swig&#x27;</span> %&#125;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><p>在主题配置文件 <code>themes/next/_config.yml</code> 中添加如下代码：</p><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># mouse click effect: fireworks | explosion | love | text </span></span><br><span class="line">  <span class="attr">cursor_effect:</span> <span class="string">love</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo主题美化-评论打字特性</title>
      <link href="/2020/12/27/Hexo-typing-effect/"/>
      <url>/2020/12/27/Hexo-typing-effect/</url>
      
        <content type="html"><![CDATA[<p><strong>Hexo主题美化-打字特性</strong></p><p><img src="https://pan.yropo.top/img/20201229/typing-effect.gif" alt="typing"></p><p>下载：<a href="https://pan.yropo.top/source/js/activate-power-mode.min.js">打字礼花</a>  </p><p>将脚本文件放置到 <code>themes/next/source/js</code> 目录下。</p><p>在主题自定义配置 <code>themes/next/layout/_custom/custom.swig</code> 文件中添加如下代码：</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&#123;% <span class="keyword">if</span> theme.<span class="property">typing_effect</span> %&#125;</span><br><span class="line">  &lt;script <span class="keyword">async</span> src=<span class="string">&quot;/js/activate-power-mode.min.js&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-handlebars"><span class="language-xml"></span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">    POWERMODE.colorful = </span><span class="template-variable">&#123;&#123; <span class="name">theme.typing_effect.colorful</span> &#125;&#125;</span><span class="language-xml">;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">    POWERMODE.shake = </span><span class="template-variable">&#123;&#123; <span class="name">theme.typing_effect.shake</span> &#125;&#125;</span><span class="language-xml">;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">    document.body.addEventListener(&#x27;input&#x27;, POWERMODE);</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">  </span></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">&#123;% endif %&#125;</span><br></pre></td></tr></table></figure><p>在主题配置文件 <code>themes/next/_config.yml</code> 中添加如下代码：</p><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># typing effect</span></span><br><span class="line"><span class="attr">typing_effect:</span></span><br><span class="line">  <span class="attr">colorful:</span> <span class="literal">true</span>  <span class="comment"># 礼花特效</span></span><br><span class="line">  <span class="attr">shake:</span> <span class="literal">false</span>  <span class="comment"># 震动特效</span></span><br></pre></td></tr></table></figure><p>在 <code>themes/next/layout/_layout.swig</code> 文件 body 标签中添加如下代码：</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">    ...</span><br><span class="line">    &#123;% include <span class="string">&#x27;_custom/custom.swig&#x27;</span> %&#125;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo主题美化-网站运行时间</title>
      <link href="/2020/12/27/Hexo-webtime/"/>
      <url>/2020/12/27/Hexo-webtime/</url>
      
        <content type="html"><![CDATA[<p><strong>Hexo 主题美化-网站运行时间</strong></p><p>在主题自定义配置 <code>themes/next/layout/_custom/custom.swig</code> 文件中添加如下代码：</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&#123;# 页脚站点运行时间统计 #&#125;</span><br><span class="line">&#123;% <span class="keyword">if</span> theme.<span class="property">footer</span>.<span class="property">site_runtime</span>.<span class="property">enable</span> %&#125;</span><br><span class="line">  &lt;script src=<span class="string">&quot;https://cdn.jsdelivr.net/npm/moment@2.22.2/moment.min.js&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/npm/moment-precise-range-plugin@1.3.0/moment-precise-range.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">function</span> <span class="title function_">timer</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">var</span> ages = moment.<span class="title function_">preciseDiff</span>(<span class="title function_">moment</span>(),<span class="title function_">moment</span>(&#123;&#123; theme.<span class="property">footer</span>.<span class="property">site_runtime</span>.<span class="property">since</span> &#125;&#125;,<span class="string">&quot;YYYYMMDD&quot;</span>));</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      ages = ages.<span class="title function_">replace</span>(<span class="regexp">/years?/</span>, <span class="string">&quot;年&quot;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      ages = ages.<span class="title function_">replace</span>(<span class="regexp">/months?/</span>, <span class="string">&quot;月&quot;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      ages = ages.<span class="title function_">replace</span>(<span class="regexp">/days?/</span>, <span class="string">&quot;天&quot;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      ages = ages.<span class="title function_">replace</span>(<span class="regexp">/hours?/</span>, <span class="string">&quot;小时&quot;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      ages = ages.<span class="title function_">replace</span>(<span class="regexp">/minutes?/</span>, <span class="string">&quot;分&quot;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      ages = ages.<span class="title function_">replace</span>(<span class="regexp">/seconds?/</span>, <span class="string">&quot;秒&quot;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      ages = ages.<span class="title function_">replace</span>(<span class="regexp">/\d+/g</span>, <span class="string">&#x27;&lt;span style=&quot;color:&#123;&#123; theme.footer.site_runtime.color &#125;&#125;&quot;&gt;$&amp;&lt;/span&gt;&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      div.<span class="property">innerHTML</span> = <span class="string">`&#123;&#123; __(&#x27;footer.site_runtime&#x27;)&#125;&#125; <span class="subst">$&#123;ages&#125;</span>`</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">var</span> div = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;div&quot;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">//插入到copyright之后</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">var</span> copyright = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;.copyright&quot;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;.footer-inner&quot;</span>).<span class="title function_">insertBefore</span>(div, copyright.<span class="property">nextSibling</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title function_">timer</span>();</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="built_in">setInterval</span>(<span class="string">&quot;timer()&quot;</span>,<span class="number">1000</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">&#123;% endif %&#125;</span><br></pre></td></tr></table></figure><p>在 <code>themes/next/layout/_layout.swig</code> 文件 body 标签中添加如下代码：</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">    ...</span><br><span class="line">    &#123;% include <span class="string">&#x27;_custom/custom.swig&#x27;</span> %&#125;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><p>在主题主题配置文件 <code>themes/next/_config.yml</code> 中添加如下内容：</p><figure class="highlight diff"><table><tr><td class="code"><pre><span class="line">  footer:</span><br><span class="line">    ...</span><br><span class="line"><span class="addition">+  # Web Site runtime</span></span><br><span class="line"><span class="addition">+  site_runtime:</span></span><br><span class="line"><span class="addition">+  enable: true</span></span><br><span class="line"><span class="addition">+  # Specify the date when the site was setup</span></span><br><span class="line"><span class="addition">+  since: 20191124</span></span><br><span class="line"><span class="addition">+  # color of number</span></span><br><span class="line"><span class="addition">+  color: &quot;#1890ff&quot;</span></span><br></pre></td></tr></table></figure><p>然后在文件 <code>themes\next\languages\zh-CN.yml</code> 中补全对应文案：</p><figure class="highlight diff"><table><tr><td class="code"><pre><span class="line">  footer:</span><br><span class="line">    powered: &quot;由 %s 强力驱动&quot;</span><br><span class="line">    theme: 主题</span><br><span class="line">    # total_views: 总访问量</span><br><span class="line">    # total_visitors: 总访客量</span><br><span class="line">    total_views: &quot;历经 %s 次回眸才与你相遇&quot;</span><br><span class="line">    total_visitors: &quot;我的第 %s 位朋友&quot;</span><br><span class="line"><span class="addition">+   site_runtime: &quot;我已在此等候你&quot;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>博客搭建起始</title>
      <link href="/2020/12/27/Hexo-start/"/>
      <url>/2020/12/27/Hexo-start/</url>
      
        <content type="html"><![CDATA[<h2 id="Star’s-Tech-Blog"><a href="#Star’s-Tech-Blog" class="headerlink" title="Star’s Tech Blog"></a>Star’s Tech Blog</h2><p>框架驱动：<a href="https://hexo.io/zh-cn/">Hexo</a>  </p><p>博客主题：<a href="https://github.com/theme-next/hexo-theme-next">NexT ^7.x</a></p><h2 id="博客搭建与配置"><a href="#博客搭建与配置" class="headerlink" title="博客搭建与配置"></a>博客搭建与配置</h2><h3 id="环境准备"><a href="#环境准备" class="headerlink" title="环境准备"></a>环境准备</h3><ul><li><p><a href="http://nodejs.org/">Node.js</a></p></li><li><p><a href="http://git-scm.com/">Git</a></p></li></ul><h3 id="Hexo-搭建"><a href="#Hexo-搭建" class="headerlink" title="Hexo 搭建"></a>Hexo 搭建</h3><p>安装 Hexo，打开 Git Bash 命令窗口，输入命令：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install -g hexo-cli</span><br></pre></td></tr></table></figure><p>安装好 Hexo 后，在任意目录新建一个空文件夹，名字可以为 blogs，然后进入这个文件夹，在命令行输入命令：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hexo init </span><br></pre></td></tr></table></figure><p>执行完成后（如果命令窗口出现橙色的 WARN 不用管），生成文件结构：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">├── node_modules       //依赖安装目录</span><br><span class="line">├── scaffolds          //模板文件夹，新建的文章将会从此目录下的文件中继承格式</span><br><span class="line">|   ├── draft.md         //草稿模板</span><br><span class="line">|   ├── page.md          //页面模板</span><br><span class="line">|   └── post.md          //文章模板</span><br><span class="line">├── <span class="built_in">source</span>             //资源文件夹，用于放置图片、数据、文章等资源</span><br><span class="line">|   └── _posts           //文章目录</span><br><span class="line">├── themes             //主题文件夹</span><br><span class="line">|   └── landscape        //默认主题</span><br><span class="line">├── .gitignore         //指定不纳入git版本控制的文件</span><br><span class="line">├── _config.yml        //站点配置文件</span><br><span class="line">├── db.json            </span><br><span class="line">├── package.json</span><br><span class="line">└── package-lock.json</span><br></pre></td></tr></table></figure><p>下载依赖包，输入命令：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install</span><br></pre></td></tr></table></figure><p>依赖包下载完成后，输入如下命令启动 hexo 的内置 Web 服务器：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hexo g // 打包文件</span><br><span class="line"></span><br><span class="line">hexo s // 启动服务器</span><br></pre></td></tr></table></figure><p>然后可以在在浏览器中通过地址 <a href="http://localhost:4000/">http://localhost:4000/</a> 访问博客了。</p><h3 id="更换-NexT-主题"><a href="#更换-NexT-主题" class="headerlink" title="更换 NexT 主题"></a>更换 NexT 主题</h3><p>Hexo 更换主题的方式很简单，只需要将主题文件拷贝至根目录下的 themes 目录中， 然后修改根目录下 <code>_config.yml</code> 文件中的 theme 字段，便可完成更换。</p><p>在博客项目的根目录下，输入命令：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/theme-next/hexo-theme-next.git themes/next</span><br></pre></td></tr></table></figure><p>打开根目录下 <code>_config.yml</code> 文件,将 theme 字段的值修改为 next。</p><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Extensions</span></span><br><span class="line"><span class="comment">## Plugins: https://hexo.io/plugins/</span></span><br><span class="line"><span class="comment">## Themes: https://hexo.io/themes/</span></span><br><span class="line"><span class="attr">theme:</span> <span class="string">next</span></span><br></pre></td></tr></table></figure><p>这个时候需要重启服务器 <code>hexo g &amp;&amp; hexo s</code> 并刷新才能使主题生效。</p><h3 id="重要定义"><a href="#重要定义" class="headerlink" title="重要定义"></a>重要定义</h3><p>在项目文件中存在两个 <code>_config.yml</code> 文件，为了方便区分。</p><ul><li><p>项目根目录下的 <code>_config.yml</code> 文件叫作<code>站点配置文件</code>。</p></li><li><p>主题文件夹根目录下的 <code>themes/next/_config.yml</code> 文件叫作<code>主题配置文件</code>。</p></li></ul><h3 id="部署到-GitHub-Pages"><a href="#部署到-GitHub-Pages" class="headerlink" title="部署到 GitHub Pages"></a>部署到 GitHub Pages</h3><p><strong>GitHub 配置</strong></p><ul><li><p>创建 <a href="https://github.com/">GitHub</a> 账号</p></li><li><p>创建仓库，仓库名必须是：&lt;GitHub 账号名称&gt;.github.io，这是GitHub pages 的特殊命名规范</p></li></ul><p><strong>修改站点配置文件 _config.yml</strong></p><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Deployment</span></span><br><span class="line"><span class="comment">## Docs: https://hexo.io/docs/deployment.html</span></span><br><span class="line"><span class="attr">deploy:</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">&#x27;git&#x27;</span></span><br><span class="line">  <span class="attr">repo:</span> <span class="string">https://github.com/&lt;GitHub</span> <span class="string">账号名称&gt;/&lt;GitHub</span> <span class="string">账号名称&gt;.github.io.git</span></span><br><span class="line">  <span class="attr">branch:</span> <span class="string">master</span></span><br></pre></td></tr></table></figure><p><strong>注意</strong>：<code>GitHub pages</code> 仅在 <code>master</code> 分支下实现。</p><p><strong>部署</strong>  </p><ul><li>在项目根目录下，安装 Git 部署插件：</li></ul><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure><ul><li>部署到 Github Pages</li></ul><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hexo g </span><br><span class="line"></span><br><span class="line">hexo d</span><br></pre></td></tr></table></figure><p>部署完成后，在浏览器访问网址：https:&#x2F;&#x2F;&lt;Github账号名称&gt;.github.io 即可查看博客。</p><p>详细过程可以参考：<a href="https://blog.csdn.net/weixin_39510813/article/details/80216552">借助 GitHub pages 搭建静态个人网站并绑定域名</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> Hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Sakuraの其他网站</title>
      <link href="/2020/12/25/index/"/>
      <url>/2020/12/25/index/</url>
      
        <content type="html"><![CDATA[<h3 id="博客"><a href="#博客" class="headerlink" title="博客"></a>博客</h3><ul><li><a href="https://yropo.top/">Sakuraのblog</a></li></ul><h3 id="网盘"><a href="#网盘" class="headerlink" title="网盘"></a>网盘</h3><ul><li><a href="https://pan.yropo.top/">Sakura Cloud</a>.</li></ul><h3 id="机场"><a href="#机场" class="headerlink" title="机场"></a>机场</h3><ul><li><a href="https://www.yropo.top/">Sakuraの小站点</a></li></ul><p>​    <strong>Let’s START!</strong></p>]]></content>
      
      
      
    </entry>
    
    
  
  
</search>
